# [Gold V] 호반우가 학교에 지각한 이유 3 - 30470 

[문제 링크](https://www.acmicpc.net/problem/30470) 

### 성능 요약

메모리: 10420 KB, 시간: 112 ms

### 분류

자료 구조, 구현, 시뮬레이션, 스택

### 제출 일자

2023년 11월 21일 22:08:38

### 문제 설명

<p>우여곡절 끝에 시작의 마을 앞까지 도착한 호반우지만 절벽 위의 마을로 향하는 계단이 마물들의 습격으로 망가져 통나무로 계단을 만들기로 하였다. 호반우는 통나무를 세로로 나란히 세워 계단을 만드는데, 중간중간 마물들이 마법을 사용해 방해하고 있다!</p>

<p>마물들이 위력이 $m$인 마법을 사용하면, 현재 계단을 구성하는 통나무 중 <strong>가장 긴 통나무의 길이</strong> $k$를 기준으로 길이가 $\max (k-m,\,0)$ 이상인 통나무들의 길이를 $\max (k-m,\,0)$으로 만들어 버린다. 만약 통나무가 없다면 마법은 무시한다.</p>

<p>호반우와 마물들의 행동을 나타내는 $N$개의 쿼리가 다음과 같이 주어진다.</p>

<ul>
	<li><span style="color:#e74c3c;"><code>1 x</code></span>: 호반우가 길이 $x$의 통나무를 계단 옆에 나란히 세운다.</li>
	<li><span style="color:#3498db;"><code>2 x</code></span>: 마물들이 계단에 위력 $x$의 마법을 사용한다.</li>
</ul>

<p>호반우는 계단을 만들고 싶기에 호반우가 새로 세우는 통나무는 항상 이전에 $1$번 쿼리로 세운 통나무의 길이보다 길며, 마물들은 통나무가 없어도 마법을 사용할 때가 있다. 호반우가 처음으로 세우는 통나무는 따로 길이의 제한이 없다.</p>

<p>$N$개의 쿼리를 순서대로 전부 수행한 이후 완성된 계단을 구성하는 모든 통나무의 길이의 합을 구해보자.</p>

### 입력 

 <p>첫 번째 줄에 쿼리의 개수 $N$이 주어진다. $(1 \le N \le 500\,000)$</p>

<p>두 번째 줄부터 $N$개의 줄에 걸쳐 양의 정수 쌍 $a,\,b$가 공백을 두고 주어진다. $(a \in \{1,2\},1 \le b \le 10^{9})$</p>

<p>$a$가 $1$이면 호반우가 길이 $b$의 통나무를 계단 옆에 세운 것이고 새로 세우는 통나무는 항상 이전에 $1$번 쿼리로 세운 통나무의 길이보다 길다.</p>

<p>$a$가 $2$이면 마물들이 계단에 위력 $b$의 마법을 사용한 것이며 계단을 구성하는 통나무가 없는 상태에서도 $2$번 쿼리가 입력될 수 있다.</p>

### 출력 

 <p>$N$개의 쿼리를 순서대로 전부 수행한 이후 완성된 계단을 구성하는 모든 통나무의 길이의 합을 출력한다.</p>

